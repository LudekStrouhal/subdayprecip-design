

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Příprava projektu &mdash; Dokumentace pro Tvorba webové mapové aplikace v projektu Rain 0.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Rejstřík"
              href="genindex.html"/>
        <link rel="search" title="Vyhledávání" href="search.html"/>
    <link rel="top" title="Dokumentace pro Tvorba webové mapové aplikace v projektu Rain 0.1" href="index.html"/>
        <link rel="next" title="Publikace projektu" href="publikace.html"/>
        <link rel="prev" title="Registrace" href="registrace.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Tvorba webové mapové aplikace v projektu Rain
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Obsah</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Úvod</a></li>
<li class="toctree-l1"><a class="reference internal" href="registrace.html">Registrace</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Příprava projektu</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vypocet-uhrnu-navrhovych-srazek">Výpočet úhrnu návrhových srážek</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publikace.html">Publikace projektu</a></li>
<li class="toctree-l1"><a class="reference internal" href="autori.html">Autoři</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Tvorba webové mapové aplikace v projektu Rain</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Příprava projektu</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/projekt.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="priprava-projektu">
<h1>Příprava projektu<a class="headerlink" href="#priprava-projektu" title="Trvalý odkaz na tento nadpis">¶</a></h1>
<p>V této části dokumentace si popíšeme jakým způsobem připravit naše
geografická data pro publikaci, a vypočítat pro ně návrhové srážky se
zvolenou dobou opakování a délkou srážky.</p>
<div class="admonition important">
<p class="first admonition-title">Důležité</p>
<p class="last">Pro přípravu dat je nutné použít GIS nástroj <a class="reference external" href="http://qgis.org">QGIS</a>. <strong>QGIS</strong> je open source software volně dostupný
pro různé operační systémy včetně MS Windows. <a class="reference external" href="http://qgis.org/en/site/forusers/download.html">Stáhněte aktuální
verzi</a> tohoto
softwaru a nainstalujte na Váš počítač.</p>
</div>
<p>V rámci naší ukázky použijeme vektorovou vrstvu povodí IV. řádu
veřejně dostupnou z databáze Dibavod (<a class="reference external" href="http://www.dibavod.cz/download.php?id_souboru=1418">odkaz ke stažení dat</a> ve formátu
Esri Shapefile). Na disku vytvoříme nový adresář kam data stáhneme a
rozbalíme.</p>
<div class="admonition note">
<p class="first admonition-title">Poznámka</p>
<p class="last">Namísto vrstvy povodí IV. řádu můžete přirozeně použít svoje
vlastní data. Pro výpočet návrhové srážky jsou ale podstatné dvě
věci. Vstupní vrstva musí být bodová nebo polygonová. Velikost
souboru se vstupními daty musí být <strong>menší než 10MB</strong>.</p>
</div>
<p>Spustíme program QGIS a načteme vrstvu povodí IV. řádu.</p>
<div class="figure" id="id1">
<img alt="_images/qgis-add-vector.svg" src="_images/qgis-add-vector.svg" /><p class="caption"><span class="caption-text">Soubor s povodím IV. řádu najdeme v Panelu prohlížeče a do mapového
okna přidáme tažením myši (Drag-And-Drop).</span></p>
</div>
<div class="admonition important">
<p class="first admonition-title">Důležité</p>
<p>U případě dat v souřadnicovém systému S-JTSK se může
stát, že jej QGIS nekorektně identifikuje (v našem případě jako
uživatelský souřadnicový systém 100000). Tento problém je třeba
opravit, jinak <em>nebude možné projekt publikovat</em>! Souřadnicový systém
nastavíme v dialogu vlastnostech vrstvy (<span class="menuselection">Vrstva ‣
Vlastnosti</span>). V případě S-JTSK použijeme EPSG kód 5514.</p>
<div class="figure">
<img alt="_images/qgis-vector-props.svg" src="_images/qgis-vector-props.svg" /></div>
<p>Zároveň nastavíme stejný souřadnicový systém i pro mapové okno, viz
obr. níže.</p>
<div class="last figure" id="id2">
<img alt="_images/qgis-statusbar-srs.svg" src="_images/qgis-statusbar-srs.svg" /><p class="caption"><span class="caption-text">Změna souřadnicového systému mapového okna z
uživatelského (100000) na S-JTSK (5514).</span></p>
</div>
</div>
<p>Pro účel demonstrace celého postupu publikace vybereme pouze několik
málo povodí. Aktivujeme nástroj pro výběr prvků (viz obr. níže) a
tažením myši definujeme obdélník pro výběr. Vybraná povodí budou
zvýrazněna žlutou barvou.</p>
<div class="figure" id="id3">
<img alt="_images/qgis-select.svg" src="_images/qgis-select.svg" /><p class="caption"><span class="caption-text">Výběr zájmových povodí pro publikaci.</span></p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Více k ovládaní programu QGIS najdete v <a class="reference external" href="http://training.gismentors.eu/qgis-zacatecnik/">online materiálech</a> pro školení
skupiny GISMentors.</p>
</div>
<div class="section" id="vypocet-uhrnu-navrhovych-srazek">
<h2>Výpočet úhrnu návrhových srážek<a class="headerlink" href="#vypocet-uhrnu-navrhovych-srazek" title="Trvalý odkaz na tento nadpis">¶</a></h2>
<p>Pro vybraná povodí vypočítáme úhrny návrhových srážek s danou dobou
opakování a délkou srážky. Využijeme nástroj <code class="docutils literal"><span class="pre">d-rain-shp</span></code>
poskytovaný v rámci projektu Rain jako <a class="reference external" href="http://rain.fsv.cvut.cz/webapp/webove-sluzby/ogc-wps/">WPS služba</a>. Abychom
mohli tento nástroj v programu QGIS použít, je nutné doinstalovat
zásuvný modul WPS klienta. Spustíme dialog pro správu zásuvných modulu
(<span class="menuselection">Zásuvné moduly ‣ Spravovat a instalovat zásuvné
moduly</span>). Do vyhledávacího pole zadáme klíčové slovo &#8220;wps&#8221; a zvolíme k
instalaci <strong>WPS Client</strong>.</p>
<div class="figure" id="id4">
<img alt="_images/qgis-wps-client-install.svg" src="_images/qgis-wps-client-install.svg" /><p class="caption"><span class="caption-text">Instalace zásuvného modulu WPS klienta.</span></p>
</div>
<p>V levém dolním rohu se objeví dialog WPS klienta. Klikneme na tlačítko
<code class="docutils literal"><span class="pre">Connect</span></code> a následujícím dialogu vytvoříme pomocí tlačítka <code class="docutils literal"><span class="pre">New</span></code>
nové připojení.</p>
<div class="figure" id="id5">
<img alt="_images/qgis-wps-client-connect.svg" src="_images/qgis-wps-client-connect.svg" /><p class="caption"><span class="caption-text">Dialog WPS klienta a přidání nové služby.</span></p>
</div>
<p>Zvolíme název připojení a zadáme URL služby. WPS služba projektu Rain
je dostupná na adrese <a class="reference external" href="https://rain1.fsv.cvut.cz/services/wps">https://rain1.fsv.cvut.cz/services/wps</a></p>
<div class="figure" id="id6">
<a class="reference internal image-reference" href="_images/qgis-wps-client-new.png"><img alt="_images/qgis-wps-client-new.png" src="_images/qgis-wps-client-new.png" style="width: 65%;" /></a>
<p class="caption"><span class="caption-text">Údaje pro přidání WPS služby.</span></p>
</div>
<p>Poté se ke službě připojíme (tlačítko <code class="docutils literal"><span class="pre">Connect</span></code>), zvolíme z nabídky
nástroj <code class="docutils literal"><span class="pre">d-rain-shp</span></code> a otevřeme jeho dialog pomocí tlačítka <code class="docutils literal"><span class="pre">OK</span></code>.</p>
<div class="figure" id="id7">
<img alt="_images/qgis-wps-client-select.svg" src="_images/qgis-wps-client-select.svg" /><p class="caption"><span class="caption-text">Výběr WPS nástroje <code class="docutils literal"><span class="pre">d-rain-shp</span></code> a jeho otevření.</span></p>
</div>
<p>V následujícím dialogu vyplníme vstupní parametry nástroje:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">return_period</span></code> - v našem případě jsme zvolili pouze dobu opakování 2 roky (<em>N2</em>)</li>
<li><code class="docutils literal"><span class="pre">rainlength</span></code> - délka srážky v min</li>
</ul>
<p>Podstatné je zaškrtnout <strong>Process selected objects only</strong> tak, aby
výpočet probíhal pouze nad vybranými povodími.</p>
<div class="figure" id="id8">
<img alt="_images/qgis-wps-client-params.svg" src="_images/qgis-wps-client-params.svg" /><p class="caption"><span class="caption-text">Volba vstupních parametrů pro výpočet úhrnu návrhové srážky.</span></p>
</div>
<p>Výpočet spustíme tlačítkem <code class="docutils literal"><span class="pre">Run</span></code>. Po dokončení výpočtu (délka
výpočtu je závislá na rychlosti připojení k výpočetnímu serveru neboť
WPS klient nejprve posílá vstupní data na výpočetní server a po
dokončení výpočtu výsledná data stahuje ze serveru na stranu klienta,
tj. do programu QGIS) se do mapového okna přidá automaticky i výsledná
vrstva vytvořená nástrojem <code class="docutils literal"><span class="pre">d-rain-shp</span></code>.</p>
<p>Vrstva vytvořená nástrojem <code class="docutils literal"><span class="pre">d-rain-shp</span></code> je <em>přechodná</em>, proto účel
publikace je nutné ji uložit na disk. Vytvoříme nový adresář, kam tuto
vrstvu uložíme. Tento adresář bude obsahovat veškerá data určená k
publikaci.</p>
<div class="figure" id="id9">
<a class="reference internal image-reference" href="_images/qgis-save-as.png"><img alt="_images/qgis-save-as.png" src="_images/qgis-save-as.png" style="width: 75%;" /></a>
<p class="caption"><span class="caption-text">Uložení výsledné vrstvy s úhrnem návrhových srážek na disk.</span></p>
</div>
<p>V dialogu pro uložení nové vrstvy zadáme cestu k výstupnímu souboru
(formát ponecháme Esri Shapefile). Je také důležité zkontrolovat
souřadnicový systém vrstvy. Především v případě S-JTSK se může stát,
že QGIS tento souřadnicový systém špatně detekuje. V tomto případe
souřadnicový systém vrstvy nastavíme ručně, v případě S-JTSK jde o
EPSG kód 5514.</p>
<div class="figure" id="id10">
<a class="reference internal image-reference" href="_images/qgis-save-as-dialog.svg"><img alt="_images/qgis-save-as-dialog.svg" src="_images/qgis-save-as-dialog.svg" width="75%" /></a>
<p class="caption"><span class="caption-text">Uložení zájmových povodí IV. řádu včetně vypočítaných úhrnů
návrhových srážek do nové vrstvy.</span></p>
</div>
<p>Následně nato můžeme původní a přechodnou vrstvu z mapového okna
odstranit. Ponecháme pouze nově uloženou vrstvu v adresáři pro
publikaci.</p>
<div class="figure" id="id11">
<a class="reference internal image-reference" href="_images/qgis-remove-vector.png"><img alt="_images/qgis-remove-vector.png" src="_images/qgis-remove-vector.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Původní a přechodnou vrstvu odstraníme z mapového okna. V projektu
ponecháme pouze data zájmového území.</span></p>
</div>
<p>Pohled okna přiblížíme na aktuální vrstvu (<span class="menuselection">Zobrazit
‣ Přiblížit na rozměry okna</span>). Otevřeme vlastnosti vrstvy
(<span class="menuselection">Vrstva ‣ Vlastnosti</span>) a nastavíme vhodný styl
(záložka <code class="docutils literal"><span class="pre">Style</span></code>). V našem případě <em>Odstupňovaný</em>, sloupec s
hodnotami návrhových srážek v mm (v našem případě <code class="docutils literal"><span class="pre">H_N2T120</span></code>) a
barevný rozsah <em>Blues</em>. Barevnou škálu aktivujeme pomocí tlačítka
<code class="docutils literal"><span class="pre">Klasifikovat</span></code>.</p>
<div class="figure" id="id12">
<img alt="_images/qgis-vector-style.svg" src="_images/qgis-vector-style.svg" /><p class="caption"><span class="caption-text">Nastavení stylu povodí dle úhrnu návrhových srážek.</span></p>
</div>
<p>Dále aktivujeme popisky (záložka <code class="docutils literal"><span class="pre">Popisky</span></code>) a nastavíme je na
sloupec s hodnotami návrhových srážek (<code class="docutils literal"><span class="pre">H_N2T120</span></code>). Formátování
čísel nastavíme na jedno desetinné číslo. Vhodné je též aktivovat pro
popisky pozadí nebo nastavit vhodnou barvu písma. Nastavení potvrdíme
tlačítkem <code class="docutils literal"><span class="pre">OK</span></code>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Jako podkladovou vrstvu lze použít veřejně dostupné WMS
vrstvy, např. <a class="reference external" href="http://geoportal.cuzk.cz/(S(5tfcubwc4m4ixgnphoebhquz))/Default.aspx?menu=3117&amp;mode=TextMeta&amp;side=wms.verejne&amp;metadataID=CZ-CUZK-WMS-ZM50-P&amp;metadataXSL=metadata.sluzba">Základní mapu 1:50 000</a>. Postup
jak <a class="reference external" href="http://training.gismentors.eu/qgis-zacatecnik/webove_sluzby/rastr.html#pripojeni-wms-sluzby">přidat do projektu WMS vrstvu</a>
naleznete v materiálech skupiny GISMentors. V tomto případě ještě
nastavíme pro vrstvu povodí vhodnou míru průhlednosti (a to v
záložce <code class="docutils literal"><span class="pre">Styl</span></code>).</p>
</div>
<p>Vrstvě můžeme před publikací ještě nastavit vhodný název
(<span class="menuselection">Vrstva ‣ Vlastnosti</span>, záložka <code class="docutils literal"><span class="pre">Obecné</span></code>, <em>Název
vrstvy</em>).</p>
<div class="figure" id="id13">
<img alt="_images/qgis-project-final.png" src="_images/qgis-project-final.png" />
<p class="caption"><span class="caption-text">Finální podoba projektu před publikací.</span></p>
</div>
<p>Projekt uložíme (<span class="menuselection">Projekt ‣ Uložit</span>) do stejného
adresáře jako vektorovou vrstvu s vypočtenými úhrny návrhových srážek.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publikace.html" class="btn btn-neutral float-right" title="Publikace projektu" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="registrace.html" class="btn btn-neutral" title="Registrace" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rain Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>